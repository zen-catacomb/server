(function(){var f;null==window.Epoch&&(window.Epoch={});null==(f=window.Epoch).Chart&&(f.Chart={});null==(f=window.Epoch).Time&&(f.Time={});null==(f=window.Epoch).Util&&(f.Util={});null==(f=window.Epoch).Formats&&(f.Formats={});Epoch.warn=function(h){return(console.warn||console.log)("Epoch Warning: "+h)};Epoch.exception=function(h){throw"Epoch Error: "+h;}}).call(this);
(function(){Epoch.TestContext=function(){function f(){var c,a,d;this._log=[];a=0;for(d=h.length;a<d;a++)c=h[a],this._makeFauxMethod(c)}var h;h="arc arcTo beginPath bezierCurveTo clearRect clip closePath drawImage fill fillRect fillText moveTo quadraticCurveTo rect restore rotate save scale scrollPathIntoView setLineDash setTransform stroke strokeRect strokeText transform translate".split(" ");f.prototype._makeFauxMethod=function(c){return this[c]=function(){var a;return this._log.push(""+c+"("+function(){var d,
b,k;k=[];d=0;for(b=arguments.length;d<b;d++)a=arguments[d],k.push(a.toString());return k}.apply(this,arguments).join(",")+")")}};f.prototype.getImageData=function(){var c;this._log.push("getImageData("+function(){var a,d,b;b=[];a=0;for(d=arguments.length;a<d;a++)c=arguments[a],b.push(c.toString());return b}.apply(this,arguments).join(",")+")");return{width:0,height:0,resolution:1,data:[]}};return f}()}).call(this);
(function(){var f,h;f=function(c){return function(a){return Object.prototype.toString.call(a)==="[object "+c+"]"}};Epoch.isArray=null!=(h=Array.isArray)?h:f("Array");Epoch.isObject=f("Object");Epoch.isString=f("String");Epoch.isFunction=f("Function");Epoch.isNumber=f("Number");Epoch.isElement=function(c){return"undefined"!==typeof HTMLElement&&null!==HTMLElement?c instanceof HTMLElement:null!=c&&Epoch.isObject(c)&&1===c.nodeType&&Epoch.isString(c.nodeName)};Epoch.Util.copy=function(c){var a,d,b;if(null==
c)return null;a={};for(d in c)b=c[d],a[d]=b;return a};Epoch.Util.defaults=function(c,a){var d,b,k,e,g;g=Epoch.Util.copy(c);for(k in a)e=c[k],b=a[k],d=Epoch.isObject(e)&&Epoch.isObject(b),null!=e&&null!=b?d&&!Epoch.isArray(e)?g[k]=Epoch.Util.defaults(e,b):g[k]=e:g[k]=null!=e?e:b;return g};Epoch.Util.formatSI=function(c,a,d){var b,k,e,g;null==a&&(a=1);null==d&&(d=!1);if(1E3>c){if((c|0)!==c||d)c=c.toFixed(a);return c}g="KMGTPEZY".split("");for(k in g)if(e=g[k],b=Math.pow(10,3*((k|0)+1)),c>=b&&c<Math.pow(10,
3*((k|0)+2))){c/=b;if(0!==c%1||d)c=c.toFixed(a);return""+c+" "+e}};Epoch.Util.formatBytes=function(c,a,d){var b,k,e,g;null==a&&(a=1);null==d&&(d=!1);if(1024>c){if(0!==c%1||d)c=c.toFixed(a);return""+c+" B"}g="KB MB GB TB PB EB ZB YB".split(" ");for(k in g)if(e=g[k],b=Math.pow(1024,(k|0)+1),c>=b&&c<Math.pow(1024,(k|0)+2)){c/=b;if(0!==c%1||d)c=c.toFixed(a);return""+c+" "+e}};Epoch.Util.dasherize=function(c){return Epoch.Util.trim(c).replace("\n","").replace(/\s+/g,"-").toLowerCase()};Epoch.Util.domain=
function(c,a){var d,b,k,e,g,n,l,s;null==a&&(a="x");k={};d=[];e=0;for(n=c.length;e<n;e++)for(b=c[e],s=b.values,g=0,l=s.length;g<l;g++)b=s[g],null==k[b[a]]&&(d.push(b[a]),k[b[a]]=!0);return d};Epoch.Util.trim=function(c){return Epoch.isString(c)?c.replace(/^\s+/g,"").replace(/\s+$/g,""):null};Epoch.Util.getComputedStyle=function(c,a){if(Epoch.isFunction(window.getComputedStyle))return window.getComputedStyle(c,a);if(null!=c.currentStyle)return c.currentStyle};Epoch.Util.toRGBA=function(c,a){var d,b,
k;if(d=c.match(/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*[0-9\.]+\)/))k=d[1],b=d[2],d=d[3],b="rgba("+k+","+b+","+d+","+a+")";else if(d=d3.rgb(c))b="rgba("+d.r+","+d.g+","+d.b+","+a+")";return b};Epoch.Util.getContext=function(c,a){null==a&&(a="2d");return null!=c.getContext?c.getContext(a):new Epoch.TestContext};Epoch.Events=function(){function c(){this._events={}}c.prototype.on=function(a,d){var b;if(null!=d)return null==(b=this._events)[a]&&(b[a]=[]),this._events[a].push(d)};c.prototype.onAll=
function(a){var d,b,k;if(Epoch.isObject(a)){k=[];for(b in a)d=a[b],k.push(this.on(b,d));return k}};c.prototype.off=function(a,d){var b,k;if(Epoch.isArray(this._events[a])){if(null==d)return delete this._events[a];for(k=[];0<=(b=this._events[a].indexOf(d));)k.push(this._events[a].splice(b,1));return k}};c.prototype.offAll=function(a){var d,b,k,e;if(Epoch.isArray(a)){e=[];d=0;for(k=a.length;d<k;d++)b=a[d],e.push(this.off(b));return e}if(Epoch.isObject(a)){k=[];for(b in a)d=a[b],k.push(this.off(b,d));
return k}};c.prototype.trigger=function(a){var d,b,k,e,g,n,l,c;if(null!=this._events[a]){d=function(){var a,g,n;n=[];e=a=1;for(g=arguments.length;1<=g?a<g:a>g;e=1<=g?++a:--a)n.push(arguments[e]);return n}.apply(this,arguments);l=this._events[a];c=[];g=0;for(n=l.length;g<n;g++)b=l[g],k=null,Epoch.isString(b)?k=this[b]:Epoch.isFunction(b)&&(k=b),null==k&&Epoch.exception("Callback for event '"+a+"' is not a function or reference to a method."),c.push(k.apply(this,d));return c}};return c}()}).call(this);
(function(){d3.selection.prototype.width=function(f){return null!=f&&Epoch.isString(f)?this.style("width",f):null!=f&&Epoch.isNumber(f)?this.style("width",""+f+"px"):+Epoch.Util.getComputedStyle(this.node(),null).width.replace("px","")};d3.selection.prototype.height=function(f){return null!=f&&Epoch.isString(f)?this.style("height",f):null!=f&&Epoch.isNumber(f)?this.style("height",""+f+"px"):+Epoch.Util.getComputedStyle(this.node(),null).height.replace("px","")}}).call(this);
(function(){var f;Epoch.Formats.regular=function(h){return h};Epoch.Formats.si=function(h){return Epoch.Util.formatSI(h)};Epoch.Formats.percent=function(h){return(100*h).toFixed(1)+"%"};Epoch.Formats.seconds=function(h){return f(new Date(1E3*h))};f=d3.time.format("%I:%M:%S %p");Epoch.Formats.bytes=function(h){return Epoch.Util.formatBytes(h)}}).call(this);
(function(){var f={}.hasOwnProperty,h=function(c,a){function d(){this.constructor=c}for(var b in a)f.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=a.prototype;return c};Epoch.Chart.Base=function(c){function a(k){this.options=null!=k?k:{};a.__super__.constructor.call(this);this.options.model?(null!=this.options.model.hasData()?this.setData(this.options.model.getData(this.options.type,this.options.dataFormat)):this.setData(this.options.data||[]),this.options.model.on("data:updated",
function(a){return function(){return a.setDataFromModel()}}(this))):this.setData(this.options.data||[]);null!=this.options.el&&(this.el=d3.select(this.options.el));this.width=this.options.width;this.height=this.options.height;null!=this.el?(null==this.width&&(this.width=this.el.width()),null==this.height&&(this.height=this.el.height())):(null==this.width&&(this.width=d.width),null==this.height&&(this.height=d.height),this.el=d3.select(document.createElement("DIV")).attr("width",this.width).attr("height",
this.height));this.onAll(b)}var d,b;h(a,c);d={width:320,height:240,dataFormat:null};b={"option:width":"dimensionsChanged","option:height":"dimensionsChanged","layer:shown":"layerChanged","layer:hidden":"layerChanged"};a.prototype._getAllOptions=function(){return Epoch.Util.defaults({},this.options)};a.prototype._getOption=function(a){var e,g;a=a.split(".");for(e=this.options;a.length&&null!=e;)g=a.shift(),e=e[g];return e};a.prototype._setOption=function(a,e){var g,n,b;g=a.split(".");for(n=this.options;g.length;){b=
g.shift();if(0===g.length){n[b]=e;this.trigger("option:"+a);break}null==n[b]&&(n[b]={});n=n[b]}};a.prototype._setManyOptions=function(a,e){var g,n,b;null==e&&(e="");b=[];for(g in a)n=a[g],Epoch.isObject(n)?b.push(this._setManyOptions(n,""+(e+g)+".")):b.push(this._setOption(e+g,n));return b};a.prototype.option=function(){if(0===arguments.length)return this._getAllOptions();if(1===arguments.length&&Epoch.isString(arguments[0]))return this._getOption(arguments[0]);if(2===arguments.length&&Epoch.isString(arguments[0]))return this._setOption(arguments[0],
arguments[1]);if(1===arguments.length&&Epoch.isObject(arguments[0]))return this._setManyOptions(arguments[0])};a.prototype.setDataFromModel=function(){var a;a=this._prepareData(this.options.model.getData(this.options.type,this.options.dataFormat));this.data=this._annotateLayers(a);return this.draw()};a.prototype.setData=function(a,e){var g;g=this._prepareData(this.rawData=this._formatData(a));return this.data=this._annotateLayers(g)};a.prototype._prepareData=function(a){return a};a.prototype._formatData=
function(a){return Epoch.Data.formatData(a,this.options.type,this.options.dataFormat)};a.prototype._annotateLayers=function(a){var e,g,b,d,c;e=1;d=0;for(c=a.length;d<c;d++)b=a[d],g=["layer"],g.push("category"+e),b.category=e,b.visible=!0,null!=b.label&&g.push(Epoch.Util.dasherize(b.label)),b.className=g.join(" "),e++;return a};a.prototype._findLayer=function(a){var e,g,b,d,c;g=null;if(Epoch.isString(a))for(c=this.data,b=0,d=c.length;b<d;b++){if(e=c[b],e.label===a){g=e;break}}else Epoch.isNumber(a)&&
(a=parseInt(a),0>a||a>=this.data.length||(g=this.data[a]));return g};a.prototype.showLayer=function(a){var e;if((e=this._findLayer(a))&&!e.visible)return e.visible=!0,this.trigger("layer:shown")};a.prototype.hideLayer=function(a){var e;if((e=this._findLayer(a))&&e.visible)return e.visible=!1,this.trigger("layer:hidden")};a.prototype.toggleLayer=function(a){if(a=this._findLayer(a))return a.visible=!a.visible,a.visible?this.trigger("layer:shown"):this.trigger("layer:hidden")};a.prototype.isLayerVisible=
function(a){var e;return(e=this._findLayer(a))?e.visible:null};a.prototype.getVisibleLayers=function(){var a,e,g,b,d;e=[];d=this.data;g=0;for(b=d.length;g<b;g++)a=d[g],a.visible&&e.push(a);return e};a.prototype.update=function(a,e){null==e&&(e=!0);this.setData(a);if(e)return this.draw()};a.prototype.draw=function(){return this.trigger("draw")};a.prototype.extent=function(a){return[d3.min(this.getVisibleLayers(),function(e){return d3.min(e.values,a)}),d3.max(this.getVisibleLayers(),function(e){return d3.max(e.values,
a)})]};a.prototype.dimensionsChanged=function(){this.width=this.option("width")||this.width;this.height=this.option("height")||this.height;this.el.width(this.width);return this.el.height(this.height)};a.prototype.layerChanged=function(){return this.draw()};return a}(Epoch.Events);Epoch.Chart.SVG=function(c){function a(d){this.options=null!=d?d:{};a.__super__.constructor.call(this,this.options);this.svg=null!=this.el?this.el.append("svg"):d3.select(document.createElement("svg"));this.svg.attr({xmlns:"http://www.w3.org/2000/svg",
width:this.width,height:this.height})}h(a,c);a.prototype.dimensionsChanged=function(){a.__super__.dimensionsChanged.call(this);return this.svg.attr("width",this.width).attr("height",this.height)};return a}(Epoch.Chart.Base);Epoch.Chart.Canvas=function(c){function a(d){this.options=null!=d?d:{};a.__super__.constructor.call(this,this.options);this.pixelRatio=null!=this.options.pixelRatio?this.options.pixelRatio:null!=window.devicePixelRatio?window.devicePixelRatio:1;this.canvas=d3.select(document.createElement("CANVAS"));
this.canvas.style({width:""+this.width+"px",height:""+this.height+"px"});this.canvas.attr({width:this.getWidth(),height:this.getHeight()});null!=this.el&&this.el.node().appendChild(this.canvas.node());this.ctx=Epoch.Util.getContext(this.canvas.node())}h(a,c);a.prototype.getWidth=function(){return this.width*this.pixelRatio};a.prototype.getHeight=function(){return this.height*this.pixelRatio};a.prototype.clear=function(){return this.ctx.clearRect(0,0,this.getWidth(),this.getHeight())};a.prototype.getStyles=
function(a){return Epoch.QueryCSS.getStyles(a,this.el)};a.prototype.dimensionsChanged=function(){a.__super__.dimensionsChanged.call(this);this.canvas.style({width:""+this.width+"px",height:""+this.height+"px"});return this.canvas.attr({width:this.getWidth(),height:this.getHeight()})};return a}(Epoch.Chart.Base)}).call(this);
(function(){var f;f=function(){function h(){}var c,a,d,b,k;a=0;b=function(){return"epoch-container-"+a++};c=/^([^#. ]+)?(#[^. ]+)?(\.[^# ]+)?$/;d=!1;k=function(a){var g,b;g=a.match(c);if(null==g)return Epoch.error("Query CSS cannot match given selector: "+a);b=g[1];a=g[2];g=g[3];b=(null!=b?b:"div").toUpperCase();b=document.createElement(b);null!=a&&(b.id=a.substr(1));null!=g&&(b.className=g.substr(1).replace(/\./g," "));return b};h.log=function(a){return d=a};h.cache={};h.styleList=["fill","stroke",
"stroke-width"];h.container=null;h.purge=function(){return h.cache={}};h.getContainer=function(){var a;if(null!=h.container)return h.container;a=document.createElement("DIV");a.id="_canvas_css_reference";document.body.appendChild(a);return h.container=d3.select(a)};h.hash=function(a,g){var d;d=g.attr("data-epoch-container-id");null==d&&(d=b(),g.attr("data-epoch-container-id",d));return""+d+"__"+a};h.getStyles=function(a,g){var b,l,c,m,r,f,p;l=h.hash(a,g);b=h.cache[l];if(null!=b)return b;c=[];for(b=
g.node().parentNode;null!=b&&"body"!==b.nodeName.toLowerCase();)c.unshift(b),b=b.parentNode;c.push(g.node());b=[];f=0;for(p=c.length;f<p;f++)m=c[f],r=m.nodeName.toLowerCase(),null!=m.id&&0<m.id.length&&(r+="#"+m.id),null!=m.className&&0<m.className.length&&(r+="."+Epoch.Util.trim(m.className).replace(/\s+/g,".")),b.push(r);b.push("svg");f=Epoch.Util.trim(a).split(/\s+/);m=0;for(r=f.length;m<r;m++)c=f[m],b.push(c);d&&console.log(b);for(m=r=k(b.shift());b.length;)c=k(b.shift()),m.appendChild(c),m=c;
d&&console.log(r);h.getContainer().node().appendChild(r);c=d3.select("#_canvas_css_reference "+a);m={};p=h.styleList;r=0;for(f=p.length;r<f;r++)b=p[r],m[b]=c.style(b);h.cache[l]=m;h.getContainer().html("");return m};return h}();Epoch.QueryCSS=f}).call(this);
(function(){var f,h,c=[].slice;null==Epoch.Data&&(Epoch.Data={});null==(h=Epoch.Data).Format&&(h.Format={});f=function(a,d,b,k){var e,g;null==k&&(k=[]);e=[d.labels,d.autoLabels,d.keyLabels];g=e[0];d=e[1];e=e[2];if(null!=g&&Epoch.isArray(g)&&g.length>b)a.label=g[b];else if(e&&k.length>b)a.label=k[b];else if(d){for(k=[];0<=b;)k.push(String.fromCharCode(65+b%26)),b-=26;a.label=k.join("")}return a};Epoch.Data.Format.array=function(){var a,d,b,k,e,g,n;d={x:function(a,e){return e},y:function(a,e){return a},
time:function(a,e,g){return parseInt(g)+parseInt(e)},type:"area",autoLabels:!1,labels:[],startTime:parseInt((new Date).getTime()/1E3)};a=function(a,e,g){var b,d,n;d=[];if(Epoch.isArray(a[0]))for(b in a)n=a[b],d.push(f({values:n.map(g)},e,parseInt(b)));else d.push(f({values:a.map(g)},e,0));return d};k=function(e,g){return a(e,g,function(a,e){return{x:g.x(a,e),y:g.y(a,e)}})};n=function(e,g){return a(e,g,function(a,e){return{time:g.time(a,e,g.startTime),y:g.y(a,e)}})};e=function(e,g){return a(e,g,function(a,
e){return{time:g.time(a,e,g.startTime),histogram:a}})};g=function(a,e){var g,b,d;b=[];for(g in a){d=a[g];if(!Epoch.isNumber(a[0]))return[];b.push(f({value:d},e,g))}return b};b=function(a,b){var c;null==a&&(a=[]);null==b&&(b={});if(!(Epoch.isArray(a)&&0<a.length))return[];c=Epoch.Util.defaults(b,d);return"time.heatmap"===c.type?e(a,c):c.type.match(/^time\./)?n(a,c):"pie"===c.type?g(a,c):k(a,c)};b.entry=function(a,e){var g,n,k,c,f;null==e&&(e={});if("time.gauge"===e.type){if(null==a)return 0;n=Epoch.Util.defaults(e,
d);g=Epoch.isArray(a)?a[0]:a;return n.y(g,0)}if(null==a)return[];null==e.startTime&&(e.startTime=parseInt((new Date).getTime()/1E3));g=Epoch.isArray(a)?a.map(function(a){return[a]}):[a];c=b(g,e);f=[];n=0;for(k=c.length;n<k;n++)g=c[n],f.push(g.values[0]);return f};return b}();Epoch.Data.Format.tuple=function(){var a,d,b;d={x:function(a,e){return a},y:function(a,e){return a},time:function(a,e){return a},type:"area",autoLabels:!1,labels:[]};a=function(a,e,g){var b,d,c;if(!Epoch.isArray(a[0]))return[];
d=[];if(Epoch.isArray(a[0][0]))for(b in a)c=a[b],d.push(f({values:c.map(g)},e,parseInt(b)));else d.push(f({values:a.map(g)},e,0));return d};b=function(b,e){var g;null==b&&(b=[]);null==e&&(e={});if(!(Epoch.isArray(b)&&0<b.length))return[];g=Epoch.Util.defaults(e,d);return"pie"===g.type||"time.heatmap"===g.type||"time.gauge"===g.type?[]:g.type.match(/^time\./)?a(b,g,function(a,e){return{time:g.time(a[0],parseInt(e)),y:g.y(a[1],parseInt(e))}}):a(b,g,function(a,e){return{x:g.x(a[0],parseInt(e)),y:g.y(a[1],
parseInt(e))}})};b.entry=function(a,e){var g,d,c,s,m;null==e&&(e={});if(null==a)return[];null==e.startTime&&(e.startTime=parseInt((new Date).getTime()/1E3));g=Epoch.isArray(a)&&Epoch.isArray(a[0])?a.map(function(a){return[a]}):[a];s=b(g,e);m=[];d=0;for(c=s.length;d<c;d++)g=s[d],m.push(g.values[0]);return m};return b}();Epoch.Data.Format.keyvalue=function(){var a,d,b,c,e;d={type:"area",x:function(a,e){return parseInt(e)},y:function(a,e){return a},time:function(a,e,b){return parseInt(b)+parseInt(e)},
labels:[],autoLabels:!1,keyLabels:!0,startTime:parseInt((new Date).getTime()/1E3)};a=function(a,e,b,d){var c,k,h,p,t,u;t=[];for(h in e){p=e[h];u=[];for(k in a)c=a[k],u.push(d(c,p,parseInt(k)));t.push(f({values:u},b,parseInt(h),e))}return t};c=function(e,b,d){return a(e,b,d,function(a,e,b){return{x:Epoch.isString(d.x)?a[d.x]:d.x(a,parseInt(b)),y:d.y(a[e],parseInt(b))}})};e=function(e,b,d,c){null==c&&(c="y");return a(e,b,d,function(a,e,b){var g;g=Epoch.isString(d.time)?{time:a[d.time]}:{time:d.time(a,
parseInt(b),d.startTime)};g[c]=d.y(a[e],parseInt(b));return g})};b=function(a,b,l){null==a&&(a=[]);null==b&&(b=[]);null==l&&(l={});if(!(Epoch.isArray(a)&&0<a.length&&0<b.length))return[];l=Epoch.Util.defaults(l,d);return"pie"===l.type||"time.gauge"===l.type?[]:"time.heatmap"===l.type?e(a,b,l,"histogram"):l.type.match(/^time\./)?e(a,b,l):c(a,b,l)};b.entry=function(a,e,d){var c,k;null==e&&(e=[]);null==d&&(d={});if(!(null!=a&&null!=e&&0<e.length))return[];null==d.startTime&&(d.startTime=parseInt((new Date).getTime()/
1E3));c=b([a],e,d);k=[];e=0;for(d=c.length;e<d;e++)a=c[e],k.push(a.values[0]);return k};return b}();Epoch.data=function(){var a,d,b;b=arguments[0];a=2<=arguments.length?c.call(arguments,1):[];return null==(d=Epoch.Data.Format[b])?[]:d.apply(d,a)};Epoch.Data.formatData=function(a,d,b){var c,e,g,n;null==a&&(a=[]);if(!(null!=b&&0<a.length))return a;if(Epoch.isString(b))return c={type:d},Epoch.data(b,a,c);if(!Epoch.isObject(b)||(null==b.name||!Epoch.isString(b.name))||null==Epoch.Data.Format[b.name])return a;
a=[b.name,a];if(null!=b.arguments&&Epoch.isArray(b.arguments))for(n=b.arguments,e=0,g=n.length;e<g;e++)c=n[e],a.push(c);null!=b.options?(c=b.options,null!=d&&null==c.type&&(c.type=d),a.push(c)):null!=d&&a.push({type:d});return Epoch.data.apply(Epoch.data,a)};Epoch.Data.formatEntry=function(a,d,b){var c,e,g,n;if(null==b)return a;if(Epoch.isString(b))return c={type:d},Epoch.Data.Format[b].entry(a,c);if(!Epoch.isObject(b)||(null==b.name||!Epoch.isString(b.name))||null==Epoch.Data.Format[b.name])return a;
b=Epoch.Util.defaults(b,{});a=[a];if(null!=b.arguments&&Epoch.isArray(b.arguments))for(n=b.arguments,e=0,g=n.length;e<g;e++)c=n[e],a.push(c);null!=b.options?(c=b.options,c.type=d,a.push(c)):null!=d&&a.push({type:d});d=Epoch.Data.Format[b.name].entry;return d.apply(d,a)}}).call(this);
(function(){var f={}.hasOwnProperty,h=function(c,a){function d(){this.constructor=c}for(var b in a)f.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=a.prototype;return c};Epoch.Model=function(c){function a(b){null==b&&(b={});a.__super__.constructor.call(this);b=Epoch.Util.defaults(b,d);this.dataFormat=b.dataFormat;this.data=b.data;this.loading=!1}var d;h(a,c);d={dataFormat:null};a.prototype.setData=function(a){this.data=a;return this.trigger("data:updated")};a.prototype.push=
function(a){this.entry=a;return this.trigger("data:push")};a.prototype.hasData=function(){return null!=this.data};a.prototype.getData=function(a,d){null==d&&(d=this.dataFormat);return Epoch.Data.formatData(this.data,a,d)};a.prototype.getNext=function(a,d){null==d&&(d=this.dataFormat);return Epoch.Data.formatEntry(this.entry,a,d)};return a}(Epoch.Events)}).call(this);
(function(){var f={}.hasOwnProperty,h=function(c,a){function d(){this.constructor=c}for(var b in a)f.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=a.prototype;return c};Epoch.Chart.Plot=function(c){function a(e){var g,c,l;this.options=null!=e?e:{};Epoch.Util.copy(this.options.margins);a.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,b));this.margins={};l=["top","right","bottom","left"];g=0;for(c=l.length;g<c;g++)e=l[g],this.margins[e]=
null!=this.options.margins&&null!=this.options.margins[e]?this.options.margins[e]:this.hasAxis(e)?d[e]:6;this.g=this.svg.append("g").attr("transform","translate("+this.margins.left+", "+this.margins.top+")");this.onAll(k)}var d,b,k;h(a,c);b={domain:null,range:null,axes:["left","bottom"],ticks:{top:14,bottom:14,left:5,right:5},tickFormats:{top:Epoch.Formats.regular,bottom:Epoch.Formats.regular,left:Epoch.Formats.si,right:Epoch.Formats.si}};d={top:25,right:50,bottom:25,left:50};k={"option:margins.top":"marginsChanged",
"option:margins.right":"marginsChanged","option:margins.bottom":"marginsChanged","option:margins.left":"marginsChanged","option:axes":"axesChanged","option:ticks.top":"ticksChanged","option:ticks.right":"ticksChanged","option:ticks.bottom":"ticksChanged","option:ticks.left":"ticksChanged","option:tickFormats.top":"tickFormatsChanged","option:tickFormats.right":"tickFormatsChanged","option:tickFormats.bottom":"tickFormatsChanged","option:tickFormats.left":"tickFormatsChanged","option:domain":"domainChanged",
"option:range":"rangeChanged"};a.prototype.setTickFormat=function(a,b){return this.options.tickFormats[a]=b};a.prototype.hasAxis=function(a){return-1<this.options.axes.indexOf(a)};a.prototype.innerWidth=function(){return this.width-(this.margins.left+this.margins.right)};a.prototype.innerHeight=function(){return this.height-(this.margins.top+this.margins.bottom)};a.prototype.x=function(){var a,b;a=null!=(b=this.options.domain)?b:this.extent(function(a){return a.x});return d3.scale.linear().domain(a).range([0,
this.innerWidth()])};a.prototype.y=function(){var a,b;a=null!=(b=this.options.range)?b:this.extent(function(a){return a.y});return d3.scale.linear().domain(a).range([this.innerHeight(),0])};a.prototype.bottomAxis=function(){return d3.svg.axis().scale(this.x()).orient("bottom").ticks(this.options.ticks.bottom).tickFormat(this.options.tickFormats.bottom)};a.prototype.topAxis=function(){return d3.svg.axis().scale(this.x()).orient("top").ticks(this.options.ticks.top).tickFormat(this.options.tickFormats.top)};
a.prototype.leftAxis=function(){return d3.svg.axis().scale(this.y()).orient("left").ticks(this.options.ticks.left).tickFormat(this.options.tickFormats.left)};a.prototype.rightAxis=function(){return d3.svg.axis().scale(this.y()).orient("right").ticks(this.options.ticks.right).tickFormat(this.options.tickFormats.right)};a.prototype.draw=function(){this._axesDrawn?this._redrawAxes():this._drawAxes();return a.__super__.draw.call(this)};a.prototype._redrawAxes=function(){this.hasAxis("bottom")&&this.g.selectAll(".x.axis.bottom").transition().duration(500).ease("linear").call(this.bottomAxis());
this.hasAxis("top")&&this.g.selectAll(".x.axis.top").transition().duration(500).ease("linear").call(this.topAxis());this.hasAxis("left")&&this.g.selectAll(".y.axis.left").transition().duration(500).ease("linear").call(this.leftAxis());if(this.hasAxis("right"))return this.g.selectAll(".y.axis.right").transition().duration(500).ease("linear").call(this.rightAxis())};a.prototype._drawAxes=function(){this.hasAxis("bottom")&&this.g.append("g").attr("class","x axis bottom").attr("transform","translate(0, "+
this.innerHeight()+")").call(this.bottomAxis());this.hasAxis("top")&&this.g.append("g").attr("class","x axis top").call(this.topAxis());this.hasAxis("left")&&this.g.append("g").attr("class","y axis left").call(this.leftAxis());this.hasAxis("right")&&this.g.append("g").attr("class","y axis right").attr("transform","translate("+this.innerWidth()+", 0)").call(this.rightAxis());return this._axesDrawn=!0};a.prototype.dimensionsChanged=function(){a.__super__.dimensionsChanged.call(this);this.g.selectAll(".axis").remove();
this._axesDrawn=!1;return this.draw()};a.prototype.marginsChanged=function(){var a,b,d;if(null!=this.options.margins){d=this.options.margins;for(a in d)b=d[a],this.margins[a]=null==b?6:b;this.g.transition().duration(750).attr("transform","translate("+this.margins.left+", "+this.margins.top+")");return this.draw()}};a.prototype.axesChanged=function(){var a,b,c,k;k=["top","right","bottom","left"];b=0;for(c=k.length;b<c;b++)if(a=k[b],null==this.options.margins||null==this.options.margins[a])this.hasAxis(a)?
this.margins[a]=d[a]:this.margins[a]=6;this.g.transition().duration(750).attr("transform","translate("+this.margins.left+", "+this.margins.top+")");this.g.selectAll(".axis").remove();this._axesDrawn=!1;return this.draw()};a.prototype.ticksChanged=function(){return this.draw()};a.prototype.tickFormatsChanged=function(){return this.draw()};a.prototype.domainChanged=function(){return this.draw()};a.prototype.rangeChanged=function(){return this.draw()};return a}(Epoch.Chart.SVG)}).call(this);
(function(){var f={}.hasOwnProperty,h=function(c,a){function d(){this.constructor=c}for(var b in a)f.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=a.prototype;return c};Epoch.Chart.Area=function(c){function a(d){this.options=null!=d?d:{};null==(d=this.options).type&&(d.type="area");a.__super__.constructor.call(this,this.options)}h(a,c);a.prototype.y=function(){var a,b,c,e,g,n,l,s;a=[];n=this.getVisibleLayers();e=0;for(g=n.length;e<g;e++)for(b in c=n[e],l=c.values,l)c=
l[b],null!=a[b]&&(a[b]+=c.y),null==a[b]&&(a[b]=c.y);return d3.scale.linear().domain(null!=(s=this.options.range)?s:[0,d3.max(a)]).range([this.height-this.margins.top-this.margins.bottom,0])};a.prototype.draw=function(){var d,b,c,e,g;b=[this.x(),this.y(),this.getVisibleLayers()];e=b[0];g=b[1];b=b[2];this.g.selectAll(".layer").remove();if(0!==b.length)return d=d3.svg.area().x(function(a){return e(a.x)}).y0(function(a){return g(a.y0)}).y1(function(a){return g(a.y0+a.y)}),c=d3.layout.stack().values(function(a){return a.values}),
c(b),b=this.g.selectAll(".layer").data(b,function(a){return a.category}),b.select(".area").attr("d",function(a){return d(a.values)}),b.enter().append("g").attr("class",function(a){return a.className}),b.append("path").attr("class","area").attr("d",function(a){return d(a.values)}),a.__super__.draw.call(this)};return a}(Epoch.Chart.Plot)}).call(this);
(function(){var f={}.hasOwnProperty,h=function(c,a){function d(){this.constructor=c}for(var b in a)f.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=a.prototype;return c};Epoch.Chart.Bar=function(c){function a(e){this.options=null!=e?e:{};this.options="horizontal"===this.options.orientation?Epoch.Util.defaults(this.options,b):Epoch.Util.defaults(this.options,d);a.__super__.constructor.call(this,this.options);this.onAll(k)}var d,b,k;h(a,c);d={type:"bar",style:"grouped",
orientation:"vertical",padding:{bar:0.08,group:0.1},outerPadding:{bar:0.08,group:0.1}};b=Epoch.Util.defaults({tickFormats:{top:Epoch.Formats.si,bottom:Epoch.Formats.si,left:Epoch.Formats.regular,right:Epoch.Formats.regular}},d);k={"option:orientation":"orientationChanged","option:padding":"paddingChanged","option:outerPadding":"paddingChanged","option:padding:bar":"paddingChanged","option:padding:group":"paddingChanged","option:outerPadding:bar":"paddingChanged","option:outerPadding:group":"paddingChanged"};
a.prototype.x=function(){var a;if("vertical"===this.options.orientation)return d3.scale.ordinal().domain(Epoch.Util.domain(this.getVisibleLayers())).rangeRoundBands([0,this.innerWidth()],this.options.padding.group,this.options.outerPadding.group);a=this.extent(function(a){return a.y});a[0]=Math.min(0,a[0]);return d3.scale.linear().domain(a).range([0,this.width-this.margins.left-this.margins.right])};a.prototype.x1=function(a){var b;return d3.scale.ordinal().domain(function(){var a,e,d,c;d=this.getVisibleLayers();
c=[];a=0;for(e=d.length;a<e;a++)b=d[a],c.push(b.category);return c}.call(this)).rangeRoundBands([0,a.rangeBand()],this.options.padding.bar,this.options.outerPadding.bar)};a.prototype.y=function(){var a;return"vertical"===this.options.orientation?(a=this.extent(function(a){return a.y}),a[0]=Math.min(0,a[0]),d3.scale.linear().domain(a).range([this.height-this.margins.top-this.margins.bottom,0])):d3.scale.ordinal().domain(Epoch.Util.domain(this.getVisibleLayers())).rangeRoundBands([0,this.innerHeight()],
this.options.padding.group,this.options.outerPadding.group)};a.prototype.y1=function(a){var b;return d3.scale.ordinal().domain(function(){var a,e,d,c;d=this.getVisibleLayers();c=[];a=0;for(e=d.length;a<e;a++)b=d[a],c.push(b.category);return c}.call(this)).rangeRoundBands([0,a.rangeBand()],this.options.padding.bar,this.options.outerPadding.bar)};a.prototype._remapData=function(){var a,b,d,c,k,m,f,h,p,t,u,v;k={};u=this.getVisibleLayers();m=0;for(h=u.length;m<h;m++)for(c=u[m],a="bar "+c.className.replace(/\s*layer\s*/,
""),v=c.values,f=0,p=v.length;f<p;f++)b=v[f],null==k[t=b.x]&&(k[t]=[]),k[b.x].push({label:c.category,y:b.y,className:a});b=[];for(d in k)a=k[d],b.push({group:d,values:a});return b};a.prototype.draw=function(){"horizontal"===this.options.orientation?this._drawHorizontal():this._drawVertical();return a.__super__.draw.call(this)};a.prototype._drawVertical=function(){var a,b,d,c,k,m;a=[this.x(),this.y()];c=a[0];m=a[1];k=this.x1(c);b=this.height-this.margins.top-this.margins.bottom;a=this._remapData();
a=this.g.selectAll(".layer").data(a,function(a){return a.group});a.transition().duration(750).attr("transform",function(a){return"translate("+c(a.group)+", 0)"});a.enter().append("g").attr("class","layer").attr("transform",function(a){return"translate("+c(a.group)+", 0)"});d=a.selectAll("rect").data(function(a){return a.values});d.attr("class",function(a){return a.className});d.transition().duration(600).attr("x",function(a){return k(a.label)}).attr("y",function(a){return m(a.y)}).attr("width",k.rangeBand()).attr("height",
function(a){return b-m(a.y)});d.enter().append("rect").attr("class",function(a){return a.className}).attr("x",function(a){return k(a.label)}).attr("y",function(a){return m(a.y)}).attr("width",k.rangeBand()).attr("height",function(a){return b-m(a.y)});d.exit().transition().duration(150).style("opacity","0").remove();return a.exit().transition().duration(750).style("opacity","0").remove()};a.prototype._drawHorizontal=function(){var a,b,d,c,k;a=[this.x(),this.y()];d=a[0];c=a[1];k=this.y1(c);a=this._remapData();
a=this.g.selectAll(".layer").data(a,function(a){return a.group});a.transition().duration(750).attr("transform",function(a){return"translate(0, "+c(a.group)+")"});a.enter().append("g").attr("class","layer").attr("transform",function(a){return"translate(0, "+c(a.group)+")"});b=a.selectAll("rect").data(function(a){return a.values});b.attr("class",function(a){return a.className});b.transition().duration(600).attr("x",function(a){return 0}).attr("y",function(a){return k(a.label)}).attr("height",k.rangeBand()).attr("width",
function(a){return d(a.y)});b.enter().append("rect").attr("class",function(a){return a.className}).attr("x",function(a){return 0}).attr("y",function(a){return k(a.label)}).attr("height",k.rangeBand()).attr("width",function(a){return d(a.y)});b.exit().transition().duration(150).style("opacity","0").remove();return a.exit().transition().duration(750).style("opacity","0").remove()};a.prototype.orientationChanged=function(){var a,b,d,c;c=this.options.tickFormats.top;a=this.options.tickFormats.bottom;
b=this.options.tickFormats.left;d=this.options.tickFormats.right;this.options.tickFormats.left=c;this.options.tickFormats.right=a;this.options.tickFormats.top=b;this.options.tickFormats.bottom=d;return this.draw()};a.prototype.paddingChanged=function(){return this.draw()};return a}(Epoch.Chart.Plot)}).call(this);
(function(){var f={}.hasOwnProperty,h=function(c,a){function d(){this.constructor=c}for(var b in a)f.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=a.prototype;return c};Epoch.Chart.Histogram=function(c){function a(c){this.options=null!=c?c:{};a.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,d));this.onAll(b)}var d,b;h(a,c);d={type:"histogram",domain:[0,100],bucketRange:[0,100],buckets:10,cutOutliers:!1};b={"option:bucketRange":"bucketRangeChanged",
"option:buckets":"bucketsChanged","option:cutOutliers":"cutOutliersChanged"};a.prototype._prepareData=function(a){var b,d,c,l,s,f,h,q,p,t,u,v;b=(this.options.bucketRange[1]-this.options.bucketRange[0])/this.options.buckets;h=[];q=0;for(t=a.length;q<t;q++){s=a[q];d=function(){var a,b,e;e=[];a=0;for(b=this.options.buckets;0<=b?a<b:a>b;0<=b?++a:--a)e.push(0);return e}.call(this);v=s.values;p=0;for(u=v.length;p<u;p++)f=v[p],c=parseInt((f.x-this.options.bucketRange[0])/b),this.options.cutOutliers&&(0>
c||c>=this.options.buckets)||(0>c?c=0:c>=this.options.buckets&&(c=this.options.buckets-1),d[c]+=parseInt(f.y));d={values:d.map(function(a,d){return{x:parseInt(d)*b,y:a}})};for(l in s)c=s[l],"values"!==l&&(d[l]=c);h.push(d)}return h};a.prototype.resetData=function(){this.setData(this.rawData);return this.draw()};a.prototype.bucketRangeChanged=function(){return this.resetData()};a.prototype.bucketsChanged=function(){return this.resetData()};a.prototype.cutOutliersChanged=function(){return this.resetData()};
return a}(Epoch.Chart.Bar)}).call(this);
(function(){var f={}.hasOwnProperty,h=function(c,a){function d(){this.constructor=c}for(var b in a)f.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=a.prototype;return c};Epoch.Chart.Line=function(c){function a(d){this.options=null!=d?d:{};null==(d=this.options).type&&(d.type="line");a.__super__.constructor.call(this,this.options)}h(a,c);a.prototype.line=function(){var a,b,c;c=[this.x(),this.y()];a=c[0];b=c[1];return d3.svg.line().x(function(b){return function(b){return a(b.x)}}(this)).y(function(a){return function(a){return b(a.y)}}(this))};a.prototype.draw=
function(){var d,b;d=[this.x(),this.y(),this.line(),this.getVisibleLayers()];b=d[2];d=d[3];if(0===d.length)return this.g.selectAll(".layer").remove();d=this.g.selectAll(".layer").data(d,function(a){return a.category});d.select(".line").transition().duration(500).attr("d",function(a){return b(a.values)});d.enter().append("g").attr("class",function(a){return a.className}).append("path").attr("class","line").attr("d",function(a){return b(a.values)});d.exit().transition().duration(750).style("opacity",
"0").remove();return a.__super__.draw.call(this)};return a}(Epoch.Chart.Plot)}).call(this);
(function(){var f={}.hasOwnProperty,h=function(c,a){function d(){this.constructor=c}for(var b in a)f.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=a.prototype;return c};Epoch.Chart.Pie=function(c){function a(b){this.options=null!=b?b:{};a.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,d));this.pie=d3.layout.pie().sort(null).value(function(a){return a.value});this.arc=d3.svg.arc().outerRadius(function(a){return function(){return Math.max(a.width,
a.height)/2-a.options.margin}}(this)).innerRadius(function(a){return function(){return a.options.inner}}(this));this.g=this.svg.append("g").attr("transform","translate("+this.width/2+", "+this.height/2+")");this.on("option:margin","marginChanged");this.on("option:inner","innerChanged")}var d;h(a,c);d={type:"pie",margin:10,inner:0};a.prototype.draw=function(){var b;this.g.selectAll(".arc").remove();b=this.g.selectAll(".arc").data(this.pie(this.getVisibleLayers()),function(a){return a.data.category});
b.enter().append("g").attr("class",function(a){return"arc pie "+a.data.className});b.select("path").attr("d",this.arc);b.select("text").attr("transform",function(a){return function(b){return"translate("+a.arc.centroid(b)+")"}}(this)).text(function(a){return a.data.label||a.data.category});b.append("path").attr("d",this.arc).each(function(a){return this._current=a});b.append("text").attr("transform",function(a){return function(b){return"translate("+a.arc.centroid(b)+")"}}(this)).attr("dy",".35em").style("text-anchor",
"middle").text(function(a){return a.data.label||a.data.category});return a.__super__.draw.call(this)};a.prototype.marginChanged=function(){return this.draw()};a.prototype.innerChanged=function(){return this.draw()};return a}(Epoch.Chart.SVG)}).call(this);
(function(){var f={}.hasOwnProperty,h=function(c,a){function d(){this.constructor=c}for(var b in a)f.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=a.prototype;return c};Epoch.Chart.Scatter=function(c){function a(b){this.options=null!=b?b:{};a.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,d));this.on("option:radius","radiusChanged")}var d;h(a,c);d={type:"scatter",radius:3.5,axes:["top","bottom","left","right"]};a.prototype.draw=function(){var b,
d,e,c,n;b=[this.x(),this.y(),this.getVisibleLayers()];c=b[0];n=b[1];b=b[2];e=this.options.radius;if(0===b.length)return this.g.selectAll(".layer").remove();d=this.g.selectAll(".layer").data(b,function(a){return a.category});d.enter().append("g").attr("class",function(a){return a.className});b=d.selectAll(".dot").data(function(a){return a.values});b.transition().duration(500).attr("r",function(a){var b;return null!=(b=a.r)?b:e}).attr("cx",function(a){return c(a.x)}).attr("cy",function(a){return n(a.y)});
b.enter().append("circle").attr("class","dot").attr("r",function(a){var b;return null!=(b=a.r)?b:e}).attr("cx",function(a){return c(a.x)}).attr("cy",function(a){return n(a.y)});b.exit().transition().duration(750).style("opacity",0).remove();d.exit().transition().duration(750).style("opacity",0).remove();return a.__super__.draw.call(this)};a.prototype.radiusChanged=function(){return this.draw()};return a}(Epoch.Chart.Plot)}).call(this);
(function(){var f={}.hasOwnProperty,h=function(c,a){function d(){this.constructor=c}for(var b in a)f.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=a.prototype;return c};Epoch.Time.Plot=function(c){function a(e){var c,n,l;this.options=e;Epoch.Util.copy(this.options.margins);a.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,b));if(this.options.model)this.options.model.on("data:push",function(a){return function(){return a.pushFromModel()}}(this));
this._queue=[];this.margins={};l=["top","right","bottom","left"];c=0;for(n=l.length;c<n;c++)e=l[c],this.margins[e]=null!=this.options.margins&&null!=this.options.margins[e]?this.options.margins[e]:this.hasAxis(e)?d[e]:6;this.svg=this.el.insert("svg",":first-child").attr("width",this.width).attr("height",this.height).style("z-index","1000");"absolute"!==this.el.style("position")&&"relative"!==this.el.style("position")&&this.el.style("position","relative");this.canvas.style({position:"absolute","z-index":"999"});
this._sizeCanvas();this.animation={interval:null,active:!1,delta:function(a){return function(){return-(a.w()/a.options.fps)}}(this),tickDelta:function(a){return function(){return-(a.w()/a.pixelRatio/a.options.fps)}}(this),frame:0,duration:this.options.fps};this._buildAxes();this.animationCallback=function(a){return function(){return a._animate()}}(this);this.onAll(k)}var d,b,k;h(a,c);b={range:null,fps:24,historySize:120,windowSize:40,queueSize:10,axes:["bottom"],ticks:{time:15,left:5,right:5},tickFormats:{top:Epoch.Formats.seconds,
bottom:Epoch.Formats.seconds,left:Epoch.Formats.si,right:Epoch.Formats.si}};d={top:25,right:50,bottom:25,left:50};k={"option:margins":"marginsChanged","option:margins.top":"marginsChanged","option:margins.right":"marginsChanged","option:margins.bottom":"marginsChanged","option:margins.left":"marginsChanged","option:axes":"axesChanged","option:ticks":"ticksChanged","option:ticks.top":"ticksChanged","option:ticks.right":"ticksChanged","option:ticks.bottom":"ticksChanged","option:ticks.left":"ticksChanged",
"option:tickFormats":"tickFormatsChanged","option:tickFormats.top":"tickFormatsChanged","option:tickFormats.right":"tickFormatsChanged","option:tickFormats.bottom":"tickFormatsChanged","option:tickFormats.left":"tickFormatsChanged"};a.prototype._sizeCanvas=function(){this.canvas.attr({width:this.innerWidth(),height:this.innerHeight()});return this.canvas.style({width:""+this.innerWidth()/this.pixelRatio+"px",height:""+this.innerHeight()/this.pixelRatio+"px",top:""+this.margins.top+"px",left:""+this.margins.left+
"px"})};a.prototype._buildAxes=function(){this.svg.selectAll(".axis").remove();this._prepareTimeAxes();return this._prepareRangeAxes()};a.prototype._annotateLayers=function(a){var b,d,c,k,f;c=[];for(k in a)f=a[k],d=Epoch.Util.copy(f),b=Math.max(0,f.values.length-this.options.historySize),d.values=f.values.slice(b),b=["layer"],b.push("category"+((k|0)+1)),null!=f.label&&b.push(Epoch.Util.dasherize(f.label)),d.className=b.join(" "),d.visible=!0,c.push(d);return c};a.prototype._offsetX=function(){return 0};
a.prototype._prepareTimeAxes=function(){var a;this.hasAxis("bottom")&&(a=this.bottomAxis=this.svg.append("g").attr("class","x axis bottom canvas").attr("transform","translate("+(this.margins.left-1)+", "+(this.innerHeight()/this.pixelRatio+this.margins.top)+")"),a.append("path").attr("class","domain").attr("d","M0,0H"+(this.innerWidth()/this.pixelRatio+1)));this.hasAxis("top")&&(a=this.topAxis=this.svg.append("g").attr("class","x axis top canvas").attr("transform","translate("+(this.margins.left-
1)+", "+this.margins.top+")"),a.append("path").attr("class","domain").attr("d","M0,0H"+(this.innerWidth()/this.pixelRatio+1)));return this._resetInitialTimeTicks()};a.prototype._resetInitialTimeTicks=function(){var a,b,d,c,k;c=this.options.ticks.time;this._ticks=[];this._tickTimer=c;null!=this.bottomAxis&&this.bottomAxis.selectAll(".tick").remove();null!=this.topAxis&&this.topAxis.selectAll(".tick").remove();k=this.data;a=0;for(b=k.length;a<b;a++)if(d=k[a],null!=d.values&&0<d.values.length){b=[this.options.windowSize-
1,d.values.length-1];a=b[0];for(b=b[1];0<=a&&0<=b;)this._pushTick(a,d.values[b].time,!1,!0),a-=c,b-=c;break}return[]};a.prototype._prepareRangeAxes=function(){this.hasAxis("left")&&this.svg.append("g").attr("class","y axis left").attr("transform","translate("+(this.margins.left-1)+", "+this.margins.top+")").call(this.leftAxis());if(this.hasAxis("right"))return this.svg.append("g").attr("class","y axis right").attr("transform","translate("+(this.width-this.margins.right)+", "+this.margins.top+")").call(this.rightAxis())};
a.prototype.leftAxis=function(){var a,b;b=this.options.ticks.left;a=d3.svg.axis().scale(this.ySvg()).orient("left").tickFormat(this.options.tickFormats.left);return 2===b?a.tickValues(this.extent(function(a){return a.y})):a.ticks(b)};a.prototype.rightAxis=function(){var a,b;this.extent(function(a){return a.y});b=this.options.ticks.right;a=d3.svg.axis().scale(this.ySvg()).orient("right").tickFormat(this.options.tickFormats.left);return 2===b?a.tickValues(this.extent(function(a){return a.y})):a.ticks(b)};
a.prototype.hasAxis=function(a){return-1<this.options.axes.indexOf(a)};a.prototype.innerWidth=function(){return(this.width-(this.margins.left+this.margins.right))*this.pixelRatio};a.prototype.innerHeight=function(){return(this.height-(this.margins.top+this.margins.bottom))*this.pixelRatio};a.prototype._prepareEntry=function(a){return a};a.prototype._prepareLayers=function(a){return a};a.prototype._startTransition=function(){if(!0!==this.animation.active&&0!==this._queue.length)return this.trigger("transition:start"),
this._shift(),this.animation.active=!0,this.animation.interval=setInterval(this.animationCallback,1E3/this.options.fps)};a.prototype._stopTransition=function(){var a,b,d,c;if(this.inTransition()){c=this.data;b=0;for(d=c.length;b<d;b++)a=c[b],a.values.length>this.options.windowSize+1&&a.values.shift();b=[this._ticks[0],this._ticks[this._ticks.length-1]];a=b[0];b=b[1];null!=b&&b.enter&&(b.enter=!1,b.opacity=1);null!=a&&a.exit&&this._shiftTick();this.animation.frame=0;this.trigger("transition:end");
if(0<this._queue.length)return this._shift();this.animation.active=!1;return clearInterval(this.animation.interval)}};a.prototype.inTransition=function(){return this.animation.active};a.prototype.push=function(a){a=this._prepareLayers(a);this._queue.length>this.options.queueSize&&this._queue.splice(this.options.queueSize,this._queue.length-this.options.queueSize);if(this._queue.length===this.options.queueSize)return!1;this._queue.push(a.map(function(a){return function(b){return a._prepareEntry(b)}}(this)));
this.trigger("push");if(!this.inTransition())return this._startTransition()};a.prototype.pushFromModel=function(){return this.push(this.options.model.getNext(this.options.type,this.options.dataFormat))};a.prototype._shift=function(){var a,b,d,c;this.trigger("before:shift");a=this._queue.shift();c=this.data;for(b in c)d=c[b],d.values.push(a[b]);this._updateTicks(a[0].time);this._transitionRangeAxes();return this.trigger("after:shift")};a.prototype._transitionRangeAxes=function(){this.hasAxis("left")&&
this.svg.selectAll(".y.axis.left").transition().duration(500).ease("linear").call(this.leftAxis());if(this.hasAxis("right"))return this.svg.selectAll(".y.axis.right").transition().duration(500).ease("linear").call(this.rightAxis())};a.prototype._animate=function(){if(this.inTransition())return++this.animation.frame===this.animation.duration&&this._stopTransition(),this.draw(this.animation.frame*this.animation.delta()),this._updateTimeAxes()};a.prototype.y=function(){var a,b;a=null!=(b=this.options.range)?
b:this.extent(function(a){return a.y});return d3.scale.linear().domain(a).range([this.innerHeight(),0])};a.prototype.ySvg=function(){var a,b;a=null!=(b=this.options.range)?b:this.extent(function(a){return a.y});return d3.scale.linear().domain(a).range([this.innerHeight()/this.pixelRatio,0])};a.prototype.w=function(){return this.innerWidth()/this.options.windowSize};a.prototype._updateTicks=function(a){if(this.hasAxis("top")||this.hasAxis("bottom"))if(++this._tickTimer%this.options.ticks.time||this._pushTick(this.options.windowSize,
a,!0),!(0<=this._ticks[0].x-this.w()/this.pixelRatio))return this._ticks[0].exit=!0};a.prototype._pushTick=function(a,b,d,c){null==d&&(d=!1);null==c&&(c=!1);if(this.hasAxis("top")||this.hasAxis("bottom"))return b={time:b,x:a*(this.w()/this.pixelRatio)+this._offsetX(),opacity:d?0:1,enter:d?!0:!1,exit:!1},this.hasAxis("bottom")&&(a=this.bottomAxis.append("g").attr("class","tick major").attr("transform","translate("+(b.x+1)+",0)").style("opacity",b.opacity),a.append("line").attr("y2",6),a.append("text").attr("text-anchor",
"middle").attr("dy",19).text(this.options.tickFormats.bottom(b.time)),b.bottomEl=a),this.hasAxis("top")&&(a=this.topAxis.append("g").attr("class","tick major").attr("transform","translate("+(b.x+1)+",0)").style("opacity",b.opacity),a.append("line").attr("y2",-6),a.append("text").attr("text-anchor","middle").attr("dy",-10).text(this.options.tickFormats.top(b.time)),b.topEl=a),c?this._ticks.unshift(b):this._ticks.push(b),b};a.prototype._shiftTick=function(){var a;if(0<this._ticks.length&&(a=this._ticks.shift(),
null!=a.topEl&&a.topEl.remove(),null!=a.bottomEl))return a.bottomEl.remove()};a.prototype._updateTimeAxes=function(){var a,b,d,c,k,f,h;if(this.hasAxis("top")||this.hasAxis("bottom")){a=[this.animation.tickDelta(),1/this.options.fps];b=a[0];a=a[1];f=this._ticks;h=[];c=0;for(k=f.length;c<k;c++)d=f[c],d.x+=b,this.hasAxis("bottom")&&d.bottomEl.attr("transform","translate("+(d.x+1)+",0)"),this.hasAxis("top")&&d.topEl.attr("transform","translate("+(d.x+1)+",0)"),d.enter?d.opacity+=a:d.exit&&(d.opacity-=
a),d.enter||d.exit?(this.hasAxis("bottom")&&d.bottomEl.style("opacity",d.opacity),this.hasAxis("top")?h.push(d.topEl.style("opacity",d.opacity)):h.push(void 0)):h.push(void 0);return h}};a.prototype.draw=function(b){return a.__super__.draw.call(this)};a.prototype.dimensionsChanged=function(){a.__super__.dimensionsChanged.call(this);this.svg.attr("width",this.width).attr("height",this.height);this._sizeCanvas();this._buildAxes();return this.draw(this.animation.frame*this.animation.delta())};a.prototype.axesChanged=
function(){var a,b,c,k;k=["top","right","bottom","left"];b=0;for(c=k.length;b<c;b++)if(a=k[b],null==this.options.margins||null==this.options.margins[a])this.hasAxis(a)?this.margins[a]=d[a]:this.margins[a]=6;this._sizeCanvas();this._buildAxes();return this.draw(this.animation.frame*this.animation.delta())};a.prototype.ticksChanged=function(){this._resetInitialTimeTicks();this._transitionRangeAxes();return this.draw(this.animation.frame*this.animation.delta())};a.prototype.tickFormatsChanged=function(){this._resetInitialTimeTicks();
this._transitionRangeAxes();return this.draw(this.animation.frame*this.animation.delta())};a.prototype.marginsChanged=function(){var a,b,d;if(null!=this.options.margins){d=this.options.margins;for(a in d)b=d[a],this.margins[a]=null==b?6:b;this._sizeCanvas();return this.draw(this.animation.frame*this.animation.delta())}};a.prototype.layerChanged=function(){this._transitionRangeAxes();return a.__super__.layerChanged.call(this)};return a}(Epoch.Chart.Canvas);Epoch.Time.Stack=function(c){function a(){return a.__super__.constructor.apply(this,
arguments)}h(a,c);a.prototype._stackLayers=function(){var a,b,c,e,g,f,l;if(0<(c=this.getVisibleLayers()).length){l=[];a=g=0;for(f=c[0].values.length;0<=f?g<f:g>f;a=0<=f?++g:--g)e=0,l.push(function(){var g,f,l;l=[];g=0;for(f=c.length;g<f;g++)b=c[g],b.values[a].y0=e,l.push(e+=b.values[a].y);return l}());return l}};a.prototype._prepareLayers=function(a){var b,c,e;e=0;for(c in a)b=a[c],this.data[c].visible&&(b.y0=e,e+=b.y);return a};a.prototype.setData=function(d){a.__super__.setData.call(this,d);return this._stackLayers()};
a.prototype.extent=function(){var a,b,c,e,g,f,l,h,m;a=[0,this.getVisibleLayers()];e=a[0];c=a[1];if(!c.length)return[0,0];a=f=0;for(h=c[0].values.length;0<=h?f<h:f>h;a=0<=h?++f:--f){b=l=g=0;for(m=c.length;0<=m?l<m:l>m;b=0<=m?++l:--l)g+=c[b].values[a].y;g>e&&(e=g)}return[0,e]};a.prototype.layerChanged=function(){var d,b,c,e;this._stackLayers();e=this._queue;b=0;for(c=e.length;b<c;b++)d=e[b],this._prepareLayers(d);return a.__super__.layerChanged.call(this)};return a}(Epoch.Time.Plot)}).call(this);
(function(){var f={}.hasOwnProperty,h=function(c,a){function d(){this.constructor=c}for(var b in a)f.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=a.prototype;return c};Epoch.Time.Area=function(c){function a(d){this.options=null!=d?d:{};null==(d=this.options).type&&(d.type="time.area");a.__super__.constructor.call(this,this.options)}h(a,c);a.prototype.setStyles=function(a){a=null!=a.className?this.getStyles("g."+a.className.replace(/\s/g,".")+" path.area"):this.getStyles("g path.area");
this.ctx.fillStyle=a.fill;null!=a.stroke&&(this.ctx.strokeStyle=a.stroke);if(null!=a["stroke-width"])return this.ctx.lineWidth=a["stroke-width"].replace("px","")};a.prototype._drawAreas=function(a){var b,c,e,g,f,l,h,m,r,q,p,t;null==a&&(a=0);l=[this.y(),this.w(),this.getVisibleLayers()];r=l[0];m=l[1];l=l[2];t=[];for(c=q=p=l.length-1;0>=p?0>=q:0<=q;c=0>=p?++q:--q){f=l[c];this.setStyles(f);this.ctx.beginPath();h=[this.options.windowSize,f.values.length,this.inTransition()];e=h[0];g=h[1];for(h=h[2];-2<=
--e&&0<=--g;)b=f.values[g],b=[(e+1)*m+a,r(b.y+b.y0)],h&&(b[0]+=m),c===this.options.windowSize-1?this.ctx.moveTo.apply(this.ctx,b):this.ctx.lineTo.apply(this.ctx,b);c=h?(e+3)*m+a:(e+2)*m+a;this.ctx.lineTo(c,this.innerHeight());this.ctx.lineTo(this.width*this.pixelRatio+m+a,this.innerHeight());this.ctx.closePath();t.push(this.ctx.fill())}return t};a.prototype._drawStrokes=function(a){var b,c,e,g,f,h,s,m,r,q,p;null==a&&(a=0);c=[this.y(),this.w(),this.getVisibleLayers()];m=c[0];s=c[1];f=c[2];p=[];for(c=
r=q=f.length-1;0>=q?0>=r:0<=r;c=0>=q?++r:--r){g=f[c];this.setStyles(g);this.ctx.beginPath();h=[this.options.windowSize,g.values.length,this.inTransition()];c=h[0];e=h[1];for(h=h[2];-2<=--c&&0<=--e;)b=g.values[e],b=[(c+1)*s+a,m(b.y+b.y0)],h&&(b[0]+=s),c===this.options.windowSize-1?this.ctx.moveTo.apply(this.ctx,b):this.ctx.lineTo.apply(this.ctx,b);p.push(this.ctx.stroke())}return p};a.prototype.draw=function(c){null==c&&(c=0);this.clear();this._drawAreas(c);this._drawStrokes(c);return a.__super__.draw.call(this)};
return a}(Epoch.Time.Stack)}).call(this);
(function(){var f={}.hasOwnProperty,h=function(c,a){function d(){this.constructor=c}for(var b in a)f.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=a.prototype;return c};Epoch.Time.Bar=function(c){function a(c){this.options=null!=c?c:{};null==(c=this.options).type&&(c.type="time.bar");a.__super__.constructor.call(this,this.options)}h(a,c);a.prototype._offsetX=function(){return 0.5*this.w()/this.pixelRatio};a.prototype.setStyles=function(a){a=this.getStyles("rect.bar."+
a.replace(/\s/g,"."));this.ctx.fillStyle=a.fill;this.ctx.strokeStyle=null==a.stroke||"none"===a.stroke?"transparent":a.stroke;if(null!=a["stroke-width"])return this.ctx.lineWidth=a["stroke-width"].replace("px","")};a.prototype.draw=function(c){var b,k,e,g,f,h,s,m,r,q,p,t,u;null==c&&(c=0);this.clear();g=[this.y(),this.w()];q=g[0];r=g[1];u=this.getVisibleLayers();p=0;for(t=u.length;p<t;p++)if(s=u[p],0<s.values.length)for(this.setStyles(s.className),f=[this.options.windowSize,s.values.length,this.inTransition()],
g=f[0],h=f[1],f=(m=f[2])?-1:0;--g>=f&&0<=--h;)b=s.values[h],e=[g*r+c,b.y,b.y0],b=e[0],k=e[1],e=e[2],m&&(b+=r),b=[b+1,q(k+e),r-2,this.innerHeight()-q(k)+0.5*this.pixelRatio],this.ctx.fillRect.apply(this.ctx,b),this.ctx.strokeRect.apply(this.ctx,b);return a.__super__.draw.call(this)};return a}(Epoch.Time.Stack)}).call(this);
(function(){var f={}.hasOwnProperty,h=function(c,a){function d(){this.constructor=c}for(var b in a)f.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=a.prototype;return c};Epoch.Time.Gauge=function(c){function a(c){this.options=null!=c?c:{};a.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,d));this.value=this.options.value||0;if(this.options.model)this.options.model.on("data:push",function(a){return function(){return a.pushFromModel()}}(this));
"absolute"!==this.el.style("position")&&"relative"!==this.el.style("position")&&this.el.style("position","relative");this.svg=this.el.insert("svg",":first-child").attr("width",this.width).attr("height",this.height).attr("class","gauge-labels");this.svg.style({position:"absolute","z-index":"1"});this.svg.append("g").attr("transform","translate("+this.textX()+", "+this.textY()+")").append("text").attr("class","value").text(this.options.format(this.value));this.animation={interval:null,active:!1,delta:0,
target:0};this._animate=function(a){return function(){Math.abs(a.animation.target-a.value)<Math.abs(a.animation.delta)?(a.value=a.animation.target,clearInterval(a.animation.interval),a.animation.active=!1):a.value+=a.animation.delta;a.svg.select("text.value").text(a.options.format(a.value));return a.draw()}}(this);this.onAll(b)}var d,b;h(a,c);d={type:"time.gauge",domain:[0,1],ticks:10,tickSize:5,tickOffset:5,fps:34,format:Epoch.Formats.percent};b={"option:domain":"domainChanged","option:ticks":"ticksChanged",
"option:tickSize":"tickSizeChanged","option:tickOffset":"tickOffsetChanged","option:format":"formatChanged"};a.prototype.update=function(a){this.animation.target=a;this.animation.delta=(a-this.value)/this.options.fps;if(!this.animation.active)return this.animation.interval=setInterval(this._animate,1E3/this.options.fps),this.animation.active=!0};a.prototype.push=function(a){return this.update(a)};a.prototype.pushFromModel=function(){var a;a=this.options.model.getNext(this.options.type,this.options.dataFormat);
return this.update(a)};a.prototype.radius=function(){return this.getHeight()/1.58};a.prototype.centerX=function(){return this.getWidth()/2};a.prototype.centerY=function(){return 0.68*this.getHeight()};a.prototype.textX=function(){return this.width/2};a.prototype.textY=function(){return 0.48*this.height};a.prototype.getAngle=function(a){var b,c;c=this.options.domain;b=c[0];return(a-b)/(c[1]-b)*(Math.PI+2*Math.PI/8)-Math.PI/2-Math.PI/8};a.prototype.setStyles=function(a){a=this.getStyles(a);this.ctx.fillStyle=
a.fill;this.ctx.strokeStyle=a.stroke;if(null!=a["stroke-width"])return this.ctx.lineWidth=a["stroke-width"].replace("px","")};a.prototype.draw=function(){var b,c,d,f,h,s,m,r,q,p,t,u;h=[this.centerX(),this.centerY(),this.radius()];d=h[0];f=h[1];h=h[2];m=[this.options.tickOffset,this.options.tickSize];r=m[0];q=m[1];this.clear();m=d3.scale.linear().domain([0,this.options.ticks]).range([-1.125*Math.PI,Math.PI/8]);this.setStyles(".epoch .gauge .tick");this.ctx.beginPath();b=t=0;for(u=this.options.ticks;0<=
u?t<=u:t>=u;b=0<=u?++t:--t)b=m(b),b=[Math.cos(b),Math.sin(b)],c=b[0],s=b[1],b=c*(h-r)+d,p=s*(h-r)+f,c=c*(h-r-q)+d,s=s*(h-r-q)+f,this.ctx.moveTo(b,p),this.ctx.lineTo(c,s);this.ctx.stroke();this.setStyles(".epoch .gauge .arc.outer");this.ctx.beginPath();this.ctx.arc(d,f,h,-1.125*Math.PI,0.125*Math.PI,!1);this.ctx.stroke();this.setStyles(".epoch .gauge .arc.inner");this.ctx.beginPath();this.ctx.arc(d,f,h-10,-1.125*Math.PI,0.125*Math.PI,!1);this.ctx.stroke();this.drawNeedle();return a.__super__.draw.call(this)};
a.prototype.drawNeedle=function(){var a,b,c;c=[this.centerX(),this.centerY(),this.radius()];a=c[0];b=c[1];c=c[2];this.setStyles(".epoch .gauge .needle");this.ctx.beginPath();this.ctx.save();this.ctx.translate(a,b);this.ctx.rotate(this.getAngle(this.value));this.ctx.moveTo(4*this.pixelRatio,0);this.ctx.lineTo(-4*this.pixelRatio,0);this.ctx.lineTo(-1*this.pixelRatio,19-c);this.ctx.lineTo(1,19-c);this.ctx.fill();this.setStyles(".epoch .gauge .needle-base");this.ctx.beginPath();this.ctx.arc(0,0,this.getWidth()/
25,0,2*Math.PI);this.ctx.fill();return this.ctx.restore()};a.prototype.domainChanged=function(){return this.draw()};a.prototype.ticksChanged=function(){return this.draw()};a.prototype.tickSizeChanged=function(){return this.draw()};a.prototype.tickOffsetChanged=function(){return this.draw()};a.prototype.formatChanged=function(){return this.svg.select("text.value").text(this.options.format(this.value))};return a}(Epoch.Chart.Canvas)}).call(this);
(function(){var f={}.hasOwnProperty,h=function(c,a){function d(){this.constructor=c}for(var b in a)f.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=a.prototype;return c};Epoch.Time.Heatmap=function(c){function a(c){this.options=null!=c?c:{};a.__super__.constructor.call(this,this.options=Epoch.Util.defaults(this.options,b));this._setOpacityFunction();this._setupPaintCanvas();this.onAll(f)}var d,b,f;h(a,c);b={type:"time.heatmap",buckets:10,bucketRange:[0,100],opacity:"linear",
bucketPadding:2,paintZeroValues:!1,cutOutliers:!1};d={root:function(a,b){return Math.pow(a/b,0.5)},linear:function(a,b){return a/b},quadratic:function(a,b){return Math.pow(a/b,2)},cubic:function(a,b){return Math.pow(a/b,3)},quartic:function(a,b){return Math.pow(a/b,4)},quintic:function(a,b){return Math.pow(a/b,5)}};f={"option:buckets":"bucketsChanged","option:bucketRange":"bucketRangeChanged","option:opacity":"opacityChanged","option:bucketPadding":"bucketPaddingChanged","option:paintZeroValues":"paintZeroValuesChanged",
"option:cutOutliers":"cutOutliersChanged"};a.prototype._setOpacityFunction=function(){if(Epoch.isString(this.options.opacity)){if(this._opacityFn=d[this.options.opacity],null==this._opacityFn)return Epoch.exception("Unknown coloring function provided '"+this.options.opacity+"'")}else return Epoch.isFunction(this.options.opacity)?this._opacityFn=this.options.opacity:Epoch.exception("Unknown type for provided coloring function.")};a.prototype.setData=function(b){var c,d,f,h;a.__super__.setData.call(this,
b);f=this.data;h=[];c=0;for(d=f.length;c<d;c++)b=f[c],h.push(b.values=b.values.map(function(a){return function(b){return a._prepareEntry(b)}}(this)));return h};a.prototype._getBuckets=function(a){var b,c,d,f,h;f=a.time;h=[];b=0;for(d=this.options.buckets;0<=d?b<d:b>d;0<=d?++b:--b)h.push(0);f={time:f,max:0,buckets:h};b=(this.options.bucketRange[1]-this.options.bucketRange[0])/this.options.buckets;h=a.histogram;for(c in h)a=h[c],d=parseInt((c-this.options.bucketRange[0])/b),this.options.cutOutliers&&
(0>d||d>=this.options.buckets)||(0>d?d=0:d>=this.options.buckets&&(d=this.options.buckets-1),f.buckets[d]+=parseInt(a));c=a=0;for(b=f.buckets.length;0<=b?a<b:a>b;c=0<=b?++a:--a)f.max=Math.max(f.max,f.buckets[c]);return f};a.prototype.y=function(){return d3.scale.linear().domain(this.options.bucketRange).range([this.innerHeight(),0])};a.prototype.ySvg=function(){return d3.scale.linear().domain(this.options.bucketRange).range([this.innerHeight()/this.pixelRatio,0])};a.prototype.h=function(){return this.innerHeight()/
this.options.buckets};a.prototype._offsetX=function(){return 0.5*this.w()/this.pixelRatio};a.prototype._setupPaintCanvas=function(){this.paintWidth=(this.options.windowSize+1)*this.w();this.paintHeight=this.height*this.pixelRatio;this.paint=document.createElement("CANVAS");this.paint.width=this.paintWidth;this.paint.height=this.paintHeight;this.p=Epoch.Util.getContext(this.paint);this.redraw();this.on("after:shift","_paintEntry");this.on("transition:end","_shiftPaintCanvas");return this.on("transition:end",
function(a){return function(){return a.draw(a.animation.frame*a.animation.delta())}}(this))};a.prototype.redraw=function(){var a,b;if(Epoch.isArray(this.data)&&0<this.data.length&&0<this.data[0].length){b=this.data[0].values.length;a=this.options.windowSize;for(this.inTransition()&&a++;0<=--b&&0<=--a;)this._paintEntry(b,a);return this.draw(this.animation.frame*this.animation.delta())}};a.prototype._computeColor=function(a,b,c){return Epoch.Util.toRGBA(c,this._opacityFn(a,b))};a.prototype._paintEntry=
function(a,b){var c,d,f,h,k,q,p,t,u,v,y,w,A,z;null==a&&(a=null);null==b&&(b=null);h=[this.w(),this.h()];y=h[0];q=h[1];null==a&&(a=this.data[0].values.length-1);null==b&&(b=this.options.windowSize);h=[];var x;x=[];k=0;for(v=this.options.buckets;0<=v?k<v:k>v;0<=v?++k:--k)x.push(0);v=0;u=this.getVisibleLayers();d=0;for(p=u.length;d<p;d++){t=u[d];k=this._getBuckets(t.values[a]);w=k.buckets;for(c in w)f=w[c],x[c]+=f;v+=k.max;f=this.getStyles("."+t.className.split(" ").join(".")+" rect.bucket");k.color=
f.fill;h.push(k)}t=b*y;this.p.clearRect(t,0,y,this.paintHeight);p=this.options.buckets;z=[];for(c in x){f=x[c];d=this._avgLab(h,c);w=u=0;for(A=h.length;w<A;w++)k=h[w],u+=k.buckets[c]/f*v;if(0<f||this.options.paintZeroValues)this.p.fillStyle=this._computeColor(f,u,d),this.p.fillRect(t,(p-1)*q,y-this.options.bucketPadding,q-this.options.bucketPadding);z.push(p--)}return z};a.prototype._shiftPaintCanvas=function(){var a;a=this.p.getImageData(this.w(),0,this.paintWidth-this.w(),this.paintHeight);return this.p.putImageData(a,
0,0)};a.prototype._avgLab=function(a,b){var c,d,f,h,k,q,p,t;p=[0,0,0,0];k=p[0];c=p[1];d=p[2];p=p[3];q=0;for(t=a.length;q<t;q++)f=a[q],null!=f.buckets[b]&&(p+=f.buckets[b]);for(h in a)f=a[h],q=null!=f.buckets[b]?f.buckets[b]|0:0,q/=p,f=d3.lab(f.color),k+=q*f.l,c+=q*f.a,d+=q*f.b;return d3.lab(k,c,d).toString()};a.prototype.draw=function(b){null==b&&(b=0);this.clear();this.ctx.drawImage(this.paint,b,0);return a.__super__.draw.call(this)};a.prototype.bucketsChanged=function(){return this.redraw()};a.prototype.bucketRangeChanged=
function(){this._transitionRangeAxes();return this.redraw()};a.prototype.opacityChanged=function(){this._setOpacityFunction();return this.redraw()};a.prototype.bucketPaddingChanged=function(){return this.redraw()};a.prototype.paintZeroValuesChanged=function(){return this.redraw()};a.prototype.cutOutliersChanged=function(){return this.redraw()};a.prototype.layerChanged=function(){return this.redraw()};return a}(Epoch.Time.Plot)}).call(this);
(function(){var f={}.hasOwnProperty,h=function(c,a){function d(){this.constructor=c}for(var b in a)f.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.__super__=a.prototype;return c};Epoch.Time.Line=function(c){function a(c){this.options=null!=c?c:{};null==(c=this.options).type&&(c.type="time.line");a.__super__.constructor.call(this,this.options)}h(a,c);a.prototype.setStyles=function(a){a=this.getStyles("g."+a.replace(/\s/g,".")+" path.line");this.ctx.fillStyle=a.fill;this.ctx.strokeStyle=
a.stroke;return this.ctx.lineWidth=this.pixelRatio*a["stroke-width"].replace("px","")};a.prototype.draw=function(c){var b,f,e,g,h,l,s,m,r,q;null==c&&(c=0);this.clear();f=[this.y(),this.w()];s=f[0];l=f[1];q=this.getVisibleLayers();m=0;for(r=q.length;m<r;m++)if(g=q[m],0<g.values.length){this.setStyles(g.className);this.ctx.beginPath();h=[this.options.windowSize,g.values.length,this.inTransition()];f=h[0];e=h[1];for(h=h[2];-2<=--f&&0<=--e;)b=g.values[e],b=[(f+1)*l+c,s(b.y)],h&&(b[0]+=l),f===this.options.windowSize-
1?this.ctx.moveTo.apply(this.ctx,b):this.ctx.lineTo.apply(this.ctx,b);this.ctx.stroke()}return a.__super__.draw.call(this)};return a}(Epoch.Time.Plot)}).call(this);(function(){Epoch._typeMap={area:Epoch.Chart.Area,bar:Epoch.Chart.Bar,line:Epoch.Chart.Line,pie:Epoch.Chart.Pie,scatter:Epoch.Chart.Scatter,histogram:Epoch.Chart.Histogram,"time.area":Epoch.Time.Area,"time.bar":Epoch.Time.Bar,"time.line":Epoch.Time.Line,"time.gauge":Epoch.Time.Gauge,"time.heatmap":Epoch.Time.Heatmap}}).call(this);
(function(){null!=window.MooTools&&function(){return Element.implement("epoch",function(f){var h,c;c=$$(this);null==(h=c.retrieve("epoch-chart")[0])&&(f.el=this,h=Epoch._typeMap[f.type],null==h&&Epoch.exception("Unknown chart type '"+f.type+"'"),c.store("epoch-chart",h=new h(f)),h.draw());return h})}()}).call(this);
(function(){var f;f=function(f){return f.fn.epoch=function(c){var a;c.el=this.get(0);null==(a=this.data("epoch-chart"))&&(a=Epoch._typeMap[c.type],null==a&&Epoch.exception("Unknown chart type '"+c.type+"'"),this.data("epoch-chart",a=new a(c)),a.draw());return a}};null!=window.jQuery&&f(jQuery)}).call(this);
(function(){var f;f=function(f){var c,a,d;a={};c=0;d=function(){return"epoch-chart-"+ ++c};return f.extend(f.fn,{epoch:function(b){var c,e;if(null!=(c=this.data("epoch-chart")))return a[c];b.el=this.get(0);e=Epoch._typeMap[b.type];null==e&&Epoch.exception("Unknown chart type '"+b.type+"'");this.data("epoch-chart",c=d());b=new e(b);a[c]=b;b.draw();return b}})};null!=window.Zepto&&f(Zepto)}).call(this);
